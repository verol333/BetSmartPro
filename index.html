<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BetSmart Pro</title>
    
    <!-- Scripts Telegram et Firebase -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-database-compat.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Configuration Firebase -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCigxBJ9Ot8-11S062n-PGiSM1uO98wE7g",
            authDomain: "betsmart-pro-55488.firebaseapp.com",
            databaseURL: "https://betsmart-pro-55488-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "betsmart-pro-55488",
            storageBucket: "betsmart-pro-55488.firebasestorage.app",
            messagingSenderId: "215633988518",
            appId: "1:215633988518:web:6342fa5daa5482a4265d67",
            measurementId: "G-623SHSQMRL"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
    </script>

    <style>
        :root {
            --primary-color: #3B3BF9;
            --secondary-color: #1BFFFF;
            --gradient-1: linear-gradient(45deg, #FFD700, #FFA500);
            --gradient-2: linear-gradient(45deg, #4ADE80, #22C55E);
            --gradient-3: linear-gradient(45deg, #6366F1, #4F46E5);
            --gradient-4: linear-gradient(45deg, #EC4899, #BE185D);
            --gradient-5: linear-gradient(45deg, #14B8A6, #0D9488);
            --white: #FFFFFF;
            --text-dark: #1A1A1A;
            --text-light: #6B7280;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        body {
            background: var(--white);
            color: var(--text-dark);
            line-height: 1.6;
            padding-bottom: 80px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 16px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--white);
            border-radius: 15px;
            box-shadow: 0 4px 15px var(--shadow);
        }

        .header-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
            text-shadow: 0 2px 4px var(--shadow);
        }

        .app-description {
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 4px 15px var(--shadow);
            border: 2px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        .app-description::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-1);
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .menu-card {
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 4px 15px var(--shadow);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px var(--shadow);
        }

        .menu-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-1);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: var(--white);
            font-size: 24px;
            box-shadow: 0 4px 10px var(--shadow);
        }
        .menu-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .requests-info {
            background: var(--white);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .requests-count {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .unlock-section {
            background: var(--gradient-1);
            color: var(--white);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
        }

        .prediction-section {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 15px var(--shadow);
            transition: transform 0.3s ease;
            position: relative;
        }

        .prediction-section:hover {
            transform: translateY(-3px);
        }

        .prediction-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: var(--white);
            font-size: 20px;
            box-shadow: 0 4px 10px var(--shadow);
        }

        .prediction-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .match-card {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px var(--shadow);
            position: relative;
        }

        .match-league {
            font-size: 12px;
            color: var(--text-light);
            margin-bottom: 10px;
            font-weight: 500;
        }

        .match-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .match-time {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 10px;
        }

        .favorite-star {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 20px;
            color: var(--text-light);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .favorite-star.active {
            color: #FFD700;
        }

        .nav-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--white);
            display: flex;
            justify-content: space-around;
            padding: 15px;
            box-shadow: 0 -4px 15px var(--shadow);
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            color: var(--text-light);
            text-decoration: none;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .nav-item i {
            font-size: 20px;
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        /* Styles spécifiques pour le système de parrainage */
        .referral-container {
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 4px 15px var(--shadow);
        }

        .referral-progress {
            margin: 20px 0;
            background: var(--light-bg);
            border-radius: 10px;
            overflow: hidden;
        }

        .referral-bar {
            height: 20px;
            background: var(--gradient-1);
            transition: width 0.3s ease;
        }

        .referral-count {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin: 10px 0;
        }

        .referral-steps {
            margin-top: 20px;
        }

        .referral-step {
            background: var(--white);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .step-number {
            width: 30px;
            height: 30px;
            background: var(--primary-color);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .fade-in {
            animation: fadeIn 0.3s ease;
        }

        .slide-in {
            animation: slideIn 0.3s ease;
        }
        <body>
    <div class="container" id="main">
        <div class="header">
            <h1 class="header-title">Tableau de Bord</h1>
        </div>

        <div class="app-description">
            <p>Votre application ultime pour des prédictions sportives fiables et optimisées. Profitez d'une intelligence artificielle avancée et d'une analyse en temps réel pour maximiser vos chances de réussite.</p>
        </div>

        <div class="menu-grid">
            <div class="menu-card" onclick="showComboPage()">
                <div class="menu-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="menu-title">Combo du Jour</div>
            </div>

            <div class="menu-card" onclick="showTopScore()">
                <div class="menu-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="menu-title">Top Score</div>
            </div>

            <div class="menu-card" onclick="showFavorites()">
                <div class="menu-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="menu-title">Favoris</div>
            </div>

            <div class="menu-card">
                <div class="menu-icon">
                    <i class="fas fa-history"></i>
                </div>
                <div class="menu-title">Historique</div>
            </div>
        </div>

        <div class="social-logos">
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_%282017%29.svg" 
                class="social-logo" alt="YouTube" onclick="window.open('https://www.youtube.com')">
            <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" 
                class="social-logo" alt="Telegram" onclick="window.open('https://t.me')">
        </div>
    </div>

    <nav class="nav-bottom">
        <a href="#" class="nav-item active" onclick="showHome()">
            <i class="fas fa-home"></i>
            <span>Accueil</span>
        </a>
        <a href="#" class="nav-item" onclick="showFIFA()">
            <i class="fas fa-futbol"></i>
            <span>FIFA</span>
        </a>
        <a href="#" class="nav-item" onclick="showVIP()">
            <i class="fas fa-crown"></i>
            <span>VIP</span>
        </a>
    </nav>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // Gestion des utilisateurs Firebase
        class UserManager {
            constructor() {
                this.currentUser = null;
                this.dailyLimit = 5;
                this.maxLimit = 20;
            }

            async initUser(telegramId) {
                const userRef = db.ref(`users/${telegramId}`);
                const snapshot = await userRef.once('value');
                if (!snapshot.exists()) {
                    await userRef.set({
                        dailyRequests: 0,
                        lastRequestTime: Date.now(),
                        referrals: {
                            count: 0,
                            maxReached: false
                        },
                        requestsLimit: this.dailyLimit
                    });
                }
                this.currentUser = telegramId;
                return this.getUserData();
            }

            async getUserData() {
                if (!this.currentUser) return null;
                const snapshot = await db.ref(`users/${this.currentUser}`).once('value');
                return snapshot.val();
            }

            async checkDailyReset() {
                const userData = await this.getUserData();
                if (!userData) return;

                const lastRequest = new Date(userData.lastRequestTime);
                const now = new Date();
                
                if (lastRequest.getDate() !== now.getDate() ||
                    lastRequest.getMonth() !== now.getMonth() ||
                    lastRequest.getFullYear() !== now.getFullYear()) {
                    await db.ref(`users/${this.currentUser}`).update({
                        dailyRequests: 0,
                        lastRequestTime: Date.now()
                    });
                }
            }

            async canMakeRequest() {
                await this.checkDailyReset();
                const userData = await this.getUserData();
                return userData.dailyRequests < userData.requestsLimit;
            }

            async incrementRequests() {
                const userRef = db.ref(`users/${this.currentUser}`);
                const userData = await this.getUserData();
                await userRef.update({
                    dailyRequests: userData.dailyRequests + 1,
                    lastRequestTime: Date.now()
                });
            }

            async getReferralCount() {
                const userData = await this.getUserData();
                return userData.referrals.count;
            }

            async addReferral() {
                const userData = await this.getUserData();
                if (userData.referrals.count >= 20) return false;

                const newCount = userData.referrals.count + 1;
                await db.ref(`users/${this.currentUser}/referrals`).update({
                    count: newCount,
                    maxReached: newCount >= 20
                });

                if (newCount >= 20) {
                    await db.ref(`users/${this.currentUser}`).update({
                        requestsLimit: this.maxLimit
                    });
                }

                return true;
            }
        }

        const userManager = new UserManager();

        // Initialisation avec l'ID Telegram
        async function initApp() {
            if (tg.initDataUnsafe?.user?.id) {
                await userManager.initUser(tg.initDataUnsafe.user.id);
                updateUI();
            }
        }

Je continue avec la dernière partie...

4/4 - Fin du JavaScript :

```javascript
        async function updateUI() {
            const userData = await userManager.getUserData();
            if (!userData) return;

            const remainingRequests = userData.requestsLimit - userData.dailyRequests;
            updateRequestsCounter(remainingRequests);
        }

        function updateRequestsCounter(remaining) {
            const counterElement = document.querySelector('.requests-count');
            if (counterElement) {
                counterElement.textContent = remaining;
            }
        }

        async function showFIFA() {
            const userData = await userManager.getUserData();
            const canMakeRequest = await userManager.canMakeRequest();
            const remainingRequests = userData.requestsLimit - userData.dailyRequests;

            document.getElementById('main').innerHTML = `
                <div class="header">
                    <h1 class="header-title">FIFA Prédictions</h1>
                </div>
                <div class="requests-info">
                    <h3>Analyses restantes aujourd'hui</h3>
                    <div class="requests-count">${remainingRequests}</div>
                    <p>Sur ${userData.requestsLimit} analyses quotidiennes</p>
                </div>
                ${canMakeRequest ? `
                    <div class="form-container">
                        <button onclick="showFIFAOptions()" class="start-button">
                            Commencer l'Analyse
                        </button>
                    </div>
                ` : `
                    <div class="unlock-section">
                        <h3>Augmentez votre limite quotidienne !</h3>
                        <p>Parrainez 20 personnes pour obtenir 20 analyses par jour</p>
                        <button onclick="showReferralProgram()" class="start-button">
                            Débloquer plus d'analyses
                        </button>
                    </div>
                `}
            `;
        }

        async function showReferralProgram() {
            const referralCount = await userManager.getReferralCount();
            document.getElementById('main').innerHTML = `
                <div class="referral-container">
                    <h2>Programme de Parrainage</h2>
                    <div class="referral-count">
                        ${referralCount}/20 parrainages
                    </div>
                    <div class="referral-progress">
                        <div class="referral-bar" style="width: ${(referralCount/20)*100}%"></div>
                    </div>
                    <div class="referral-steps">
                        <div class="referral-step">
                            <div class="step-number">1</div>
                            <div>Abonnez-vous à nos chaînes</div>
                        </div>
                        <div class="referral-step">
                            <div class="step-number">2</div>
                            <div>Partagez votre lien unique</div>
                        </div>
                        <div class="referral-step">
                            <div class="step-number">3</div>
                            <div>Gagnez 20 analyses par jour</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialisation de l'application
        initApp();
        tg.ready();
    </script>
</body>
</html>
            
